(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{77:function(e,t,s){},78:function(e,t,s){"use strict";s.r(t);var i=s(1),n=s.n(i),r=s(25),c=s.n(r),a=s(29),A=s(6),o=s(34),u=s(21),l=s(14),h=s(15),d=s(2),g=s(26),b=s(81),j=s(82),f=s(22),m=s(84),v=s(31),x=s.n(v),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,s=void 0===t?9:t,i=e.y,n=void 0===i?9:i;return{x:x()(0,s),y:x()(0,n)}};function p(e){for(var t=Array(e).fill(void 0).map((function(){return Array(e).fill(!1)})),s=[],i=0;i<10;i++){for(var n=0,r=!1,c=!!x()(1),a=O({x:e-(n=i<4?1:i<7?2:i<9?3:4),y:e-n}),A=a.x,o=a.y,u=0;u<n;u++)r||(r=c?t[A][o+u]:t[A+u][o]);if(r)i--;else{s.push({x:A,y:o,large:n,vertical:c});for(var l=0;l<n;l++)c?t[A][o+l]=!0:t[A+l][o]=!0}}return s}var C=s(83),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;Object(l.a)(this,e),this.large=t,this.isVertical=s,this.x=i,this.y=n,this.shots=Array(t).fill(!1),this.id=Object(C.a)(),this.useId=r,Object(d.i)(this)}return Object(h.a)(e,[{key:"setPosition",value:function(e,t){this.x=e,this.y=t}},{key:"isInPosition",value:function(e,t){return this.isVertical?e===this.x&&t>=this.y&&t<=this.y+this.large-1:t===this.y&&e>=this.x&&e<=this.x+this.large-1}},{key:"setShot",value:function(e,t){if(this.isInPosition(e,t)){var s=this.isVertical?t-this.y:e-this.x;this.shots[s]=!0}return this.isSunk}},{key:"isSunk",get:function(){return this.shots.every(Boolean)}}],[{key:"subscribeToGameShots",value:function(e,t){return t.shotSubscribe((function(s){var i=s.x,n=s.y,r=s.userId,c=s.id;r!==e.useId&&e.isInPosition(i,n)&&t.shotAcerted(e.setShot(i,n),c)}))}}]),e}(),B=function(){function e(t,s,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(l.a)(this,e),this.id=e.createId(t,s,i),this.x=t,this.y=s,this.userId=i,this.hit=n,Object(d.i)(this)}return Object(h.a)(e,[{key:"setHit",value:function(e){this.hit=e}},{key:"toJSON",value:function(){return{id:this.id,x:this.x,y:this.y,userId:this.userId,hit:this.hit}}}],[{key:"createId",value:function(e,t,s){return"".concat(s,"-").concat(e,"-").concat(t)}}]),e}(),w=function(){function e(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(l.a)(this,e),this.id=Object(C.a)(),this.isGameReady=!1,this.isGaming=!1,this.isPaused=!1,this.shots=new Map,this.isUserTurn=!1,this.userShips=[],this.computerShips=[],this.boardSize=10,this.userShipsAlive=10,this.computerShipsAlive=10,this.level=s,this.startDate=null,this.endDate=null,this.currentUserAvalilableShots=0,this.userId=Object(C.a)(),this.computerId=Object(C.a)(),this.gameStatusObervable=new b.a,this._shostStream=new j.a,this._subscriptions=new f.b,p(this.boardSize).forEach((function(e){var s=new y(e.large,e.vertical,e.x,e.y,t.userId);t.userShips.push(s),t._subscriptions.add(y.subscribeToGameShots(s,t))})),p(this.boardSize).forEach((function(e){var s=new y(e.large,e.vertical,e.x,e.y,t.computerId);t.computerShips.push(s),t._subscriptions.add(y.subscribeToGameShots(s,t))})),Object(d.i)(this,{_subscriptions:!1,_shostStream:!1,gameStatusObervable:!1})}return Object(h.a)(e,[{key:"isGameOver",get:function(){return!!this.endDate}},{key:"shotSubscribe",value:function(e){return this._shostStream.pipe(Object(m.a)((function(e){return!!e}))).subscribe(e)}},{key:"shotAcerted",value:function(e,t){var s=this.shots.get(t);s&&s.setHit(!0),e&&(s.userId===this.userId?this.computerShipsAlive--:this.userShipsAlive--)}},{key:"_shot",value:function(e,t,s){var i=new B(e,t,s);if(this.shots.has(i.id))throw new Error("shot already exist!");this.shots.set(i.id,i),this._shostStream.next(i.toJSON())}},{key:"makeUserShot",value:function(e,t){this._shot(e,t,this.userId),this.currentUserAvalilableShots--}},{key:"makeComputerShot",value:function(e,t){this._shot(e,t,this.computerId),this.currentUserAvalilableShots--}},{key:"startGame",value:function(){this.isUserTurn=!0,this.isGaming=!0,this.startDate=new Date,this.currentUserAvalilableShots=1}},{key:"endGame",value:function(){if(this.isGaming)return this.endDate=new Date,this.isGaming=!1,this._shostStream.complete(),this._subscriptions.unsubscribe(),this.gameStatusObervable.next(this.gameData),this.gameStatusObervable.complete(),this.gameData}},{key:"pausePlayGame",value:function(){this.isPaused=!this.isPaused}},{key:"nextTurn",value:function(){this.isGaming&&(this.isUserTurn=!this.isUserTurn,this.currentUserAvalilableShots=1)}},{key:"shotsAsArray",get:function(){return Object(g.a)(this.shots.values())}},{key:"currentUserId",get:function(){return this.isUserTurn?this.userId:this.computerId}},{key:"gameData",get:function(){return{id:this.id,userWins:!this.isGaming&&this.userShipsAlive>this.computerShipsAlive,level:this.level,startDate:this.startDate,endDate:this.endDate}}},{key:"squareIsDisabled",value:function(e,t){return this.shots.has(B.createId(e,t,this.userId))||!this.isGaming||this.isPaused||!this.isUserTurn||0===this.currentUserAvalilableShots}}]),e}(),D=s(39),Q=function(){function e(){Object(l.a)(this,e),this.name="",this.level=0,Object(d.i)(this),Object(D.makePersistable)(this,{name:"BattleshipStore:config",properties:["name","level"],storage:window.localStorage})}return Object(h.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"setLevel",value:function(e){this.level=e}},{key:"levelIsEasy",get:function(){return 0===this.level}},{key:"levelIsMedium",get:function(){return 1===this.level}},{key:"levelIsHard",get:function(){return 2===this.level}}]),e}(),S=function(){function e(){Object(l.a)(this,e),this.items=[],Object(d.i)(this),Object(D.makePersistable)(this,{name:"BattleshipStore:history",properties:["items"],storage:window.localStorage})}return Object(h.a)(e,[{key:"addNewItem",value:function(e){this.items.push(e)}},{key:"removeItemById",value:function(e){var t=this.items.findIndex((function(t){return t.id===e}));t>-1&&this.items.splice(t,1)}}]),e}(),I=function(){function e(){Object(l.a)(this,e),this.game=null,this.history=new S,this.config=new Q,Object(d.i)(this),this.newGame()}return Object(h.a)(e,[{key:"isGaming",get:function(){var e;return!!(null===(e=this.game)||void 0===e?void 0:e.isGaming)}},{key:"newGame",value:function(){var e=this;this.game=new w(this.config.level);var t=this.game.gameStatusObervable.subscribe({complete:function(){t.unsubscribe()},next:function(t){e.history.addNewItem(Object(u.a)(Object(u.a)({},t),{},{name:e.config.name}))}})}}]),e}(),k=s(0),E=Object(i.createContext)(null),N=function(){var e=Object(i.useContext)(E);if(null===e)throw new Error("useStore must be used in StoreContext children");return e},G=function(e){var t=e.children,s=Object(i.useState)((function(){return new I})),n=Object(o.a)(s,1)[0];return Object(k.jsx)(E.Provider,{value:n,children:t})},P=s(61),K=s(17),M=s(10),T=function(e){var t=e.icon,s=e.path,i=Object(A.h)(),n=Object(A.i)({path:s,strict:!0});return Object(k.jsx)("button",{className:Object(M.a)("btn",n&&"btn-green"),onClick:function(){return i.push(s)},children:Object(k.jsx)(K.a,{icon:t})})},U=function(e){var t=e.className,s=Object(P.a)(e,["className"]);return Object(k.jsx)("div",Object(u.a)(Object(u.a)({className:Object(M.a)("w-12 mb-3 md:mb-0",t)},s),{},{children:Object(k.jsxs)("div",{className:"flex flex-row space-x-4 md:flex-col md:space-y-4 md:space-x-0",children:[Object(k.jsx)(T,{icon:"th",path:"/board"}),Object(k.jsx)(T,{icon:"history",path:"/history"}),Object(k.jsx)(T,{icon:"cog",path:"/config"})]})}))},F=s(9),X=function(e,t){var s=16+38*(e-1);return t?"M 20 5 l -10 10 v ".concat(s," l 5 5  h  10 l  5 -5 v -").concat(s," z"):"M 5 20 l  10 10 h ".concat(s," l 5 -5 v -10 l -5 -5 h -").concat(s," z")},Y=Object(F.a)((function(e){var t=e.shipData,s=e.visible,i=void 0===s||s,n=e.showOnlyIfSunk,r=void 0!==n&&n?!(i&&t.isSunk):!i;return Object(k.jsx)("g",{transform:"translate(".concat(40*(t.x+1),",").concat(40*(t.y+1),")"),className:Object(M.a)(r&&"hidden"),children:Object(k.jsx)("path",{d:X(t.large,t.isVertical),"data-size":t.large,className:Object(M.a)("ship",t.isSunk&&"ship-sunk")})})})),V=Object(F.a)((function(e){var t=e.shot,s=e.className,i=40*(t.x+1)+20,n=40*(t.y+1)+20;return t.hit?Object(k.jsx)("image",{x:i-10,y:n-10,href:"data:image/png;base64,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",width:"20",className:s}):Object(k.jsx)("circle",{cx:i,cy:n,r:"10",className:Object(M.a)(s,"shot")})})),J=s(58),H=s.n(J),R=function(e){var t=e.x,s=e.y,i=e.horizontal,n=void 0!==i&&i,r=e.children,c=40*t+(n?0:10),a=40*s+(n?10:0),A=n?"40":"30",o=n?"30":"40";return Object(k.jsxs)("g",{transform:"translate(".concat(c,",").concat(a,")"),children:[Object(k.jsx)("rect",{height:o,width:A,stroke:"#000",fill:"none"}),Object(k.jsx)("foreignObject",{height:o,width:A,children:Object(k.jsx)("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"h-full flex items-center justify-center",children:Object(k.jsx)("span",{children:r})})})]})},L=Object(F.a)((function(e){var t=e.getGame,s=e.x,i=e.y,n=e.onClick,r=Object(d.d)((function(){return t().squareIsDisabled(s,i)})).get();return Object(k.jsx)("rect",{x:40*(s+1),y:40*(i+1),height:"40",width:"40",onClick:function(){return!r&&n()},className:Object(M.a)("square",r&&"disabled")})})),z=function(e){var t=e.children,s=e.onSelectSquare,n=e.getGame,r=Object(i.useMemo)((function(){return H()(100).map((function(e){var t=e%10,r=e/10|0,c=e<10;return Object(k.jsxs)(i.Fragment,{children:[c&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(R,{y:e+1,x:0,children:e+1}),Object(k.jsx)(R,{x:e+1,y:0,horizontal:!0,children:String.fromCharCode(65+e)})]}),Object(k.jsx)(L,{x:t,y:r,onClick:function(){return s(t,r)},getGame:n})]},e)}))}),[s]);return Object(k.jsxs)("svg",{viewBox:"0 0 440 440",className:"board",children:[r,t]})},W=["easy","medium","hard"],Z=Object(F.a)((function(e){var t=(0,e.getGame)();return Object(k.jsxs)("div",{className:"mb-4",children:[Object(k.jsx)("button",{className:"btn mx-2",onClick:function(){return t.isPaused?function(){return t.pausePlayGame()}:t.startGame()},disabled:!t||t.isGaming&&!t.isPaused||t.isGameOver,children:Object(k.jsx)(K.a,{icon:"play"})}),Object(k.jsx)("button",{className:"btn mx-2",onClick:function(){return t.endGame()},disabled:!t||!t.isGaming,children:Object(k.jsx)(K.a,{icon:"stop"})}),Object(k.jsx)("button",{className:"btn mx-2",onClick:function(){return t.pausePlayGame()},disabled:!t||!t.isGaming||t.isPaused,children:Object(k.jsx)(K.a,{icon:"pause"})}),!!t&&Object(k.jsxs)("span",{className:"text-white mr-2",children:["Level: ",W[t.level]]}),!!t&&t.isGaming&&Object(k.jsxs)("span",{className:"text-white",children:["| ",t.isUserTurn?"user":"computer"," turn"]})]})})),q=s(3),_=s.n(q);function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(i.useEffect)((function(){var t,s=Object(d.c)((function(){var s;null===(s=t)||void 0===s||s.unsubscribe(),t=e()}));return function(){var e;s(),null===(e=t)||void 0===e||e.unsubscribe()}}),Object(g.a)(t))}var ee=Object(F.a)((function(e){var t=(0,e.getGame)(),s=Object(i.useState)(!1),n=Object(o.a)(s,2),r=n[0],a=n[1],A=Object(i.useState)(!1),u=Object(o.a)(A,2),l=u[0],h=u[1];if($((function(){var e=t.gameStatusObervable.subscribe({next:function(e){var t=e.userWin;h(t),a(!0),setTimeout((function(){return a(!1)}),2e3)},complete:function(){e.unsubscribe()}});return e}),[t]),!r)return null;var d=Object(k.jsx)("div",{className:"absolute w-full h-full top-0 flex items-center justify-center bg-gray-500 bg-opacity-50",children:Object(k.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:["you ",l?"Win! \ud83c\udf89 \ud83d\ude0e":"Lost! \ud83d\udcbb"]})});return c.a.createPortal(d,document.getElementById("root-portal"))}));ee.propTypes={getGame:_.a.func.isRequired};var te=s(27),se=s.n(te),ie=s(40);function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(i.useEffect)((function(){return Object(d.c)(e)}),Object(g.a)(t))}function re(e,t,s){return ce.apply(this,arguments)}function ce(){return(ce=Object(ie.a)(se.a.mark((function e(t,s,i){var n,r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,console.groupCollapsed("Computed Shot"),n=O({x:s,y:s}),r=n.x,c=n.y,i(r,c),e.next=13;break;case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.next=11,new Promise((function(e){return setTimeout(e,1e3)}));case 11:return e.next=13,re(t,s,i);case 13:console.groupEnd();case 14:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var ae=function(e){Object(i.useEffect)((function(){return e.newGame(),function(){return e.isGaming&&e.game.endGame()}}),[]),ne(Object(ie.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.game.isGaming&&!e.game.isUserTurn&&!e.game.isPaused&&setTimeout((function(){re(e.level,e.boardSize,(function(){var t;return(t=e.game).makeComputerShot.apply(t,arguments)}))}),600);case 2:case"end":return t.stop()}}),t)})))),ne((function(){e.game.userShipsAlive&&e.game.computerShipsAlive||e.game.endGame()})),$((function(){return e.game.shotSubscribe((function(){setTimeout((function(){return e.game.nextTurn()}),800)}))}))},Ae=Object(F.a)((function(){var e=N();ae(e);var t=Object(i.useCallback)((function(t,s){try{e.game.isUserTurn&&e.game.makeUserShot(t,s)}catch(i){console.error(i)}}),[]),s=Object(d.d)((function(){return e.game.shotsAsArray.filter((function(t){return t.userId===e.game.computerId}))})).get(),n=Object(d.d)((function(){return e.game.shotsAsArray.filter((function(t){return t.userId===e.game.userId}))})).get();return Object(k.jsxs)("div",{className:"flex flex-col items-center mt-4 md:mt-0",style:{maxHeight:"80vh"},children:[Object(k.jsxs)("div",{className:"flex",style:{minWidth:"40vw"},children:[!e.game.isGaming&&Object(k.jsx)("div",{children:Object(k.jsx)("button",{onClick:function(){return e.newGame()},className:"btn btn-green",children:"New Game"})}),Object(k.jsx)(Z,{getGame:function(){return e.game}})]}),Object(k.jsxs)(z,{onSelectSquare:t,getGame:function(){return e.game},children:[e.game.userShips.map((function(t){return Object(k.jsx)(Y,{shipData:t,visible:!e.game.isUserTurn},t.id)})),e.game.computerShips.map((function(t){return Object(k.jsx)(Y,{shipData:t,visible:e.game.isUserTurn,showOnlyIfSunk:!0},t.id)})),s.map((function(t){return Object(k.jsx)(V,{shot:t,className:Object(M.a)(e.game.isUserTurn&&"hidden")},t.id)})),n.map((function(t){return Object(k.jsx)(V,{shot:t,isUserShot:!0,className:Object(M.a)(!e.game.isUserTurn&&"hidden")},t.id)}))]}),Object(k.jsxs)("section",{className:"text-white divide-x-2 flex mt-2 divide-gray-600",children:[Object(k.jsxs)("p",{className:"px-3",children:["Your ships: ",Object(k.jsx)("b",{children:e.game.userShipsAlive})]}),Object(k.jsxs)("p",{className:"px-3",children:["Enemy ships: ",Object(k.jsx)("b",{children:e.game.computerShipsAlive})]})]}),Object(k.jsx)(A.a,{when:e.isGaming,message:"Are you sure you want to leave?"}),Object(k.jsx)(ee,{getGame:function(){return e.game}})]})})),oe=function(e){var t=e.checked,s=e.onClick;return Object(k.jsx)("button",{className:"text-white",onClick:s,children:Object(k.jsx)(K.a,{icon:t?"check-square":["far","square"]})})},ue=["Easy","Medium","Hard"],le=Object(F.a)((function(){var e=N();return Object(k.jsxs)("div",{className:"py-6",children:[Object(k.jsx)("h2",{className:"text-3xl text-white",children:"Config"}),Object(k.jsxs)("section",{className:"py-6",children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{className:"text-white",children:"User Name"}),Object(k.jsx)("input",{type:"text",name:"user-name",className:"ml-4 bg-whtie bg-opacity-30 border-2 border-white rounded-lg px-2 py-1",onChange:function(t){return e.config.setName(t.target.value)},value:e.config.name})]}),Object(k.jsxs)("div",{className:"mt-6",children:[Object(k.jsx)("span",{className:"text-white mr-10",children:"Level"}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{className:"text-white mr-2 ml-5",children:ue[0]}),Object(k.jsx)(oe,{onClick:function(){return e.config.setLevel(0)},checked:e.config.levelIsEasy})]}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{className:"text-white mr-2 ml-5",children:ue[1]}),Object(k.jsx)(oe,{onClick:function(){return e.config.setLevel(1)},checked:e.config.levelIsMedium})]}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{className:"text-white mr-2 ml-5",children:ue[2]}),Object(k.jsx)(oe,{onClick:function(){return e.config.setLevel(2)},checked:e.config.levelIsHard})]})]})]})]})})),he=s(59),de=s.n(he),ge=function(e){var t=e.userWins,s=e.name,i=e.endDate,n=e.onDelete,r=e.level;return Object(k.jsxs)("div",{className:Object(M.a)("p-4","mb-5","flex","divide-x-2","rounded-lg","shadow-md","bg-opacity-60",t?["bg-green-100","divide-green-800"]:["bg-red-100","divide-red-900"]),children:[Object(k.jsxs)("div",{className:"px-3 flex font-semibold",children:[Object(k.jsx)("div",{className:Object(M.a)("text-gray-600","mr-3"),children:Object(k.jsx)(K.a,{icon:"history"})}),t?"Winner":"Loser"]}),Object(k.jsx)("div",{className:"px-3",children:s||Object(k.jsx)("i",{children:"anonymous"})}),Object(k.jsxs)("div",{className:"px-3",children:["level: ",ue[r]]}),Object(k.jsx)("div",{className:"px-3 ml-auto",children:de()(i).format("L h:mm a")}),Object(k.jsx)("div",{children:Object(k.jsx)("button",{className:"btn-icon text-gray-600 -my-4 -mr-3",onClick:n,children:Object(k.jsx)(K.a,{icon:"trash"})})})]})},be=[{path:"/",Component:function(){return Object(k.jsx)(A.b,{to:"/board"})},exact:!0},{path:"/board",Component:Ae,exact:!0},{path:"/config",Component:le,exact:!0},{path:"/history",Component:Object(F.a)((function(){var e=N();return Object(k.jsxs)("div",{className:"py-6 pr-6",children:[Object(k.jsx)("h2",{className:"text-3xl text-white",children:"History"}),Object(k.jsx)("section",{className:"pt-6 overflow-y-auto",children:e.history.items.map((function(t){return Object(k.jsx)(ge,Object(u.a)(Object(u.a)({},t),{},{onDelete:function(){return e.history.removeItemById(t.id)}}),t.id)}))})]})})),exact:!0}],je=s(23),fe=s(18),me=s(60);je.b.add(fe.d,fe.i,fe.c,fe.b,fe.f,fe.h,fe.e,fe.g,fe.j,me.a,fe.a);var ve=function(){return Object(k.jsx)(G,{children:Object(k.jsx)(a.a,{children:Object(k.jsx)("div",{className:"bg-gray-800",children:Object(k.jsxs)("div",{id:"container",children:[Object(k.jsx)(U,{style:{gridArea:"nav"}}),Object(k.jsx)("header",{style:{gridArea:"header"},children:Object(k.jsx)("h1",{className:"text-white text-4xl",children:"Battleship"})}),Object(k.jsx)("main",{style:{gridArea:"body"},children:Object(k.jsx)(A.e,{children:be.map((function(e){var t=e.path,s=e.Component,i=e.exact,n=void 0===i||i;return Object(k.jsx)(A.c,{path:t,exact:n,children:Object(k.jsx)(s,{})},t)}))})})]})})})})},xe=(s(77),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,85)).then((function(t){var s=t.getCLS,i=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),i(e),n(e),r(e),c(e)}))});c.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(ve,{})}),document.getElementById("root")),xe(console.log)}},[[78,1,2]]]);
//# sourceMappingURL=main.029ad5f2.chunk.js.map